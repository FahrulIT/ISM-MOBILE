@{
    ViewBag.Title = "Index";
    var current_date = Convert.ToString(String.Format("{0: dd MMMM yyyy}", DateTime.Now));
    ViewBag.Bu_total = 9999;
    ViewBag.Act_SP = 9999;
    ViewBag.Act_WV = 9999;
    ViewBag.Act_DY = 9999;
    ViewBag.Act_ENG = 9999;
    var dataqty = ViewBag.AgingSparepart;
}

<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-body">
                <div class="d-flex no-block align-items-center">
                    <span class="text-primary"><i class="align-middle" data-feather="bar-chart" style="height:50px;width:50px"></i></span>
                    <div class="ms-4">
                        @*<h5 class="fs-4 fw-bold mb-0">@current_date</h5>*@
                        <h7 class="fw-medium text-primary fs-4">Spare Part Situation</h7>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="row">
        <div class="card">
            <div class="card-body p-3 mb-1">
                <div class="row">
                    <p class="text-center mb-1">
                        <span class="fs-4 fw-normal badge bg-primary">Budget</span>
                    </p>
                    <p class="fs-1 text-center">9999</p>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-0 gap-3">
                    <p class="mb-1"><span class="badge fw-normal fs-4 bg-primary">A. Spinning</span></p>
                    <p class="mb-1"><span class="badge fw-normal fs-4 bg-primary">A. Weaving</span></p>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-0 gap-3">
                    <p class="fs-2 d-flex align-content-center mb-2">1,979</p>
                    <p class="fs-2 d-flex align-content-center mb-2">9999</p>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-0 gap-3">
                    <p class="mb-1"><span class="badge fw-normal fs-4 bg-primary">A. Dyeing</span></p>
                    <p class="mb-1"><span class="badge fw-normal fs-4 bg-primary">A. Eng</span></p>
                </div>

                <div class="d-flex align-items-center justify-content-between mb-0 gap-3">
                    <p class="fs-2 d-flex align-content-center mb-0">1,979</p>
                    <p class="fs-2 d-flex align-content-center mb-0">9999</p>
                </div>

            </div>


        </div>
    </div>

<div class="row">
    <div class="col">
        <div class="card">
            <div class="card-header" style="border-bottom:2px solid;border-bottom-color: rgba(165, 173, 179, 0.3);">
                <span class="fs-4 fw-bold card-title text-dark">Aging Spare Part</span>
            </div>
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col">
                        @*<div style="display:flex;justify-content:center;">
                                <div class="fw-bold py-1 w-85" style="text-align:left;padding-left:15px">
                                    Factory Supplies
                                </div>
                            </div>*@
                        <div id="chart_AgingSparepart" style="justify-content:center;"></div>
                    </div>

                    
                    @*<div class="col">
                            <div style="display:flex;justify-content:center;">
                                <div class="fw-bold py-1 w-85" style="text-align:left;padding-left:15px">
                                    Repair Maintenance
                                </div>
                            </div>
                            <div id="chart_SP_RM" style="min-height:200PX;display:flex;justify-content:center;"></div>
                        </div>*@

                    @*<div class="col">
                            <div style="display:flex;justify-content:center;">
                                <div class="fw-bold py-1 w-85" style="text-align:left;padding-left:15px">
                                    Repair From Engineering
                                </div>
                            </div>
                            <div id="chart_SP_RFE" style="min-height:200PX;display:flex;justify-content:center;"></div>
                        </div>*@
                </div>

                <div class="row">
                    <div class="col d-sm-flex justify-content-center fw-bold fs-5">
                        3 Months : @dataqty.three_months || 
                        6 Months : @dataqty.six_months ||  
                        9 Months : @dataqty.nine_months ||  
                        1 Years : @dataqty.one_years || 
                        2 Years : @dataqty.two_years || 
                        3 Years : @dataqty.three_years || 
                        4 Years : @dataqty.four_years || 
                        5 Years : @dataqty.five_years || 
                        > 5 Years : @dataqty.more_than_five_years
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/ApexChart")

<script type="text/javascript">
    $('#sidebarAgingSparepart').addClass(' active');
    $('#sidebarFixCost').removeClass('active');
    //$('#sidebarHome').removeClass('active');

    var data_array = @Html.Raw(Json.Encode(@ViewBag.AgingSparepart));
    var data_value = new Array();

    data_value[0] = data_array.three_months;
    data_value[1] = data_array.six_months;
    data_value[2] = data_array.nine_months;
    data_value[3] = data_array.one_years;
    data_value[4] = data_array.two_years;
    data_value[5] = data_array.three_years;
    data_value[6] = data_array.four_years;
    data_value[7] = data_array.five_years;
    data_value[8] = data_array.more_than_five_years;

    //var data1 = new Array();
    //data1[0] = data_array.three_months;

    //var data2 = new Array();
    //data2[0] = data_array.six_months;


    //var data3 = new Array();
    //data3[0] = data_array.nine_months;


    //var data4 = new Array();
    //data4[0] = data_array.one_years;


    //var data5 = new Array();
    //data5[0] = data_array.two_years;


    //var data6 = new Array();
    //data6[0] = data_array.three_years;

    //var data7 = new Array();
    //data7[0] = data_array.four_years;

    //var data8 = new Array();
    //data8[0] = data_array.five_years;

    //var data9 = new Array();
    //data9[0] = data_array.more_than_five_years;



    //const isi_series = [ {
    //    name: "3 Months",
    //    data: data1
    //},
    //{
    //    name: "6 Months",
    //    //data: data_array.six_months
    //    data :data2
    //},
    //{
    //    name: "9 Months",
    //    data:  data3
    //},
    //{
    //    name: "1 Years",
    //    data:  data4
    //},
    //{
    //    name: "2 Years",
    //    data:  data5
    //},
    //{
    //    name: "3 Years",
    //    data:  data6
    //},
    //{
    //    name: "4 Years",
    //    data:  data7
    //},
    //{
    //    name: "5 Years",
    //    data:  data8
    //},
    //{
    //    name: "More Than 5 Years",
    //    data:  data9
    //}];

    let counter = 0;

    //console.log(data_value);
    window.onload = doALoadOfStuff();

    function doALoadOfStuff() {
        drawChart();
    }

    function drawChart() {
        var Options = {
            //series : isi_series,
            series: [{
                data: data_value,
            }],

            chart: {
                height: 500,
                type: 'bar',
                events: {
                    click: function (chart, w, e) {
                        // console.log(chart, w, e)
                    }
                }
            },
            colors:['#008FFB', '#00E396', '#FEB019', '#FF4560',	'#775DD0', '#3f51b5', '#f9ce1d','#FF9800','#33b2df', '#546E7A','#d4526e','#13d8aa','#A5978B'],
            plotOptions: {
                bar: {
                    columnWidth: '100%',
                    barHeight:'100%',
                    distributed: true,
                },
                borderRadius: 10,
                //dataLabels: {
                //    position: 'top' // top, center, bottom
                //}
            },
            dataLabels: {
               enabled: false,
                //offsetY: 20,
                //formatter: function (val) {
                //    var x = 0.00;
                //    x = val/1000;
                //    return  x.toFixed(2)  + " K";
                //},
                //style: {
                //    colors: ['#2E294E']}
            },

           //legend: {
            //    formatter: function(seriesName, opts) {
            //        return seriesName + ' - ' + opts.w.globals.series[opts.seriesIndex];
            //    }
            //},
            legend: {
                show:false,
                //formatter: function(seriesName, opts) {
                //    let a = opts.w.globals.series[0];                    
                //    //let b = a.split(",");
                //    counter = counter + 1;
                //    //return seriesName + " - " + a[counter-1]
                //    return a[counter-1]
                //}
            },

            yaxis:
            {
                show: true,
                labels:
                {
                    formatter: function (val)
                    {
                        var x = 0.00;
                        x = val/1000;
                        return  x.toFixed()  + " K";
                    }
                }
            },
            xaxis: {
                categories: [['3 Months'], ['6 Months'],[ '9 Months'], ['1 Years'],['2 Years'], ['3 Years'],['4 Years'],['5 Years'], ['> 5 Years']],

            },
        };


        //var Options = {
        //    series: [{
        //        data: [21, 22, 10, 28, 16]
        //    }],
        //    chart: {
        //        height: 350,
        //        type: 'bar',
        //        events: {
        //            click: function(chart, w, e) {
        //                // console.log(chart, w, e)
        //            }
        //        }
        //    },
        //    colors: ['#008FFB', '#00E396', '#FEB019',	'#FF4560',	'#775DD0', '#3f51b5','#03a9f4', '#4caf50','#f9ce1d','#FF9800','#33b2df', '#546E7A','#d4526e','#13d8aa','#A5978B'],
        //    plotOptions: {
        //        bar: {
        //            columnWidth: '45%',
        //            distributed: true,
        //        }
        //    },
        //    labels: ['john', 'peter', 'mary', 'david', 'lily'],
        //    legend: {
        //        show:true,
        //        formatter: function(seriesName, opts) {
        //            let a = opts.w.globals.series[0];
        //            //let b = a.split(",");
        //            counter = counter + 1;
        //            return seriesName + " - " + a[counter-1]
        //        }
        //    },

        //        dataLabels: {
        //            enabled: false
        //        },

        //        //xaxis: {
        //        //    categories: [
        //        //      ['John', 'Doe'],
        //        //      ['Joe', 'Smith'],
        //        //      ['Jake', 'Williams'],
        //        //      'Amber',
        //        //      ['Peter', 'Brown'],
        //        //      ['Mary', 'Evans'],
        //        //      ['David', 'Wilson'],
        //        //      ['Lily', 'Roberts'],
        //        //    ],
        //        //    labels: {
        //        //        style: {
        //        //            colors: ['#008FFB', '#00E396', '#FEB019',	'#FF4560',	'#775DD0', '#3f51b5','#03a9f4', '#4caf50','#f9ce1d','#FF9800','#33b2df', '#546E7A','#d4526e','#13d8aa','#A5978B'],
        //        //            fontSize: '12px'
        //        //        }
        //        //    }
        //        //}
        //    };

        var chart = new ApexCharts(document.querySelector("#chart_AgingSparepart"), Options);
        chart.render();

    }


</script>
